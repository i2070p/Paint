<!DOCTYPE html>
<html>
    <head>
        <meta charset="{{ _charset }}"/>
        <meta name="robots" content="noindex,nofollow"/>
        <title>Draw</title>
        <link href="{{ asset('bundles/framework/css/structure.css', absolute=true) }}" rel="stylesheet"/>
        <link href="{{ asset('bundles/framework/css/body.css', absolute=true) }}" rel="stylesheet"/>
        <link rel="icon" sizes="16x16" href="{{ asset('favicon.ico') }}"/>
        <link rel="stylesheet" href="{{ asset('bundles/acmedemo/css/demo.css') }}"/>
        <script src="{{ asset('bundles/framework/javascripts/jquery-1.9.1.js') }}" type="text/javascript"></script>
        <script src="{{ asset('bundles/framework/javascripts/CanvasLayers.js') }}" type="text/javascript"></script>
        <script src="{{ asset('bundles/framework/javascripts/shapes/ShapeFactory.js') }}" type="text/javascript"></script>
        <script src="{{ asset('bundles/framework/javascripts/Style.js') }}" type="text/javascript"></script>
        <script src="{{ asset('bundles/framework/javascripts/Point.js') }}" type="text/javascript"></script>
        <script src="{{ asset('bundles/framework/javascripts/CanvasAdapter.js') }}" type="text/javascript"></script>    
        <script src="{{ asset('bundles/framework/javascripts/shapes/DrawEllipse.js') }}" type="text/javascript"></script>
        <script src="{{ asset('bundles/framework/javascripts/shapes/DrawAnyShape.js') }}" type="text/javascript"></script>    
        <script src="{{ asset('bundles/framework/javascripts/shapes/DrawLine.js') }}" type="text/javascript"></script>
        <script src="{{ asset('bundles/framework/javascripts/Drawer.js') }}" type="text/javascript"></script>
        <script src="{{ asset('bundles/framework/javascripts/shapes/DrawImage.js') }}" type="text/javascript"></script>
        <script src="{{ asset('bundles/framework/javascripts/runner.js') }}"></script>
    </head>
    <body>

        <div id="content">
            <div class="header clear-fix">
                <div class="header-logo">
                    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALYAAAA+CAMAAACxzRGDAAAAUVBMVEX////Ly8yko6WLioxkYmVXVVkwLjLl5eWxsLJKSEzy8vJxcHLY2Ni+vb89Oz9XVVh+fH+Yl5n///+xsbLY2Nlxb3KkpKWXlph+fX+LiYy+vr/IZP61AAAAAXRSTlMAQObYZgAABRBJREFUeNrVmtuWoyAQRS1FEEQSzQU7//+hYxUiXsKQZLJWM+chsUloN+WhCuguYoKyYqzmvGasKqH4HyRKxndipcgcumH8qViTM7TkUclcwaHmf5XM0eWq4km1KjdqXfMXJHVe1J3hL8lk5fCGv6wmT+o0d87U+XNrk0Y9nfv+7LM6ZJH5ZBL6LAbSxQ3Q5FDr22Skr8PQSy4n7isnsQxSX4r6pobhjCHHeDNOKrO3yGmCvZOjV9jmt8ulTdXFKdbKLNh+kOMvBzuVRa4Y7MUsdEUSWQe7xxCfZmcwjHU83LqzFvSbJQOXQvptbPnEFoyZtUUGwTeKuLuTHyT1kaP0P6cR01OKvv448gtl61dqZfmJezQmU/t+1R2fJLtBwXV6uWGwB9SZPrn0fKO2WAvQN1PUhHjTom3xgXYTkvlSKHs19OhslETq6X3HrXbjt8XbGj9b4Gi+lUAnL6XxQj8Pyk9N4Bt1xUrsLVN/3isYMug8rODMdbgOvoHs8uAb2fcANIAzkKCLYy+AXRpSU8sr1r4P67xhLgPp7vM32zlqt7Bhq2fI1Hwp+VgANxok59SsGV3oqdUL0YVDMRY7Yg8QLbVUU4NZNoOq5hJHuxEM28Sh/IyUZ8D3reR+yc58EGvOy2U0HQL6G9V+kWyEWHmzaMx6t4o9RhOm/riUiYrzqij4Ptqkn7AaCXqc+F47m04ahfde7YIz8RHEBN6BdVwdIGRVdNbKqYu1Hc0x0wBY4wqC8+XUgBGnj81SZsQB+0yAS1x/BlI/6ebHHk0lauQLuPDpu6EwAVJ7T0rl2uXa23jcqNyOZekhqYHRz3JOANrF4wCCmEs1f9D1lUe0n4NAATed80Y5e0Q7CO2TezM/BR6wKdgQzKbCF4uOQC3Bk0fKAzbFlyRWg3gksA/gmm7eOjrpaKX7fHlEW2xLbE6GZsPiCiShVzN7RG2xTz2G+OJtEqzdJ7APxy3MrSsV0VukXbKMp9lhs5BN6dr3CN+sySUaoxGwfRUM3I/gdPYONgVU+PLX4vUWm32AvUySarbONvcpV2RQEPKKjEBHFk01kQDGRblnn8ZuE9g+JUl8OWAPbkFK2K6JxhJVvF47FzYYnAN22ttwxKYCoH36rheEB7KG/HF/YUaa2G5JF+55tpyrl7B1WHM39HuP2N2EXPl1UBu8vbj4OjvD+NoTE4ssF+ScARgaJY1N7+u8bY/Y9BSM5PKwJbvMVab32YP5FB5TtcYVrGoASolVLTzI7kVsYVxRtAb5n2JXq1vCdtd47XtYItynrN0835PasLg0y13aOPbmPI+on2Lr9e5tjSHvgkAvclUjL3Fsdaw03IzgTR62yYClk7QMah4IQ0qSsoYYbOix6zJR1ZGDNMOY3Bb6W5S6jiyovep3t7bUPyoq7OkjYumrfESp8zSBc/OLosVf+nTnnKjsqR16++WDwpI8FxJWRFTlI6NKnqYJaL96TqjAbo9Toi5QiWBDcmfdFV+T8dkvFe5bItgstbM2X6QG2mVun+cazfRwOS0eiaeRRJKgLfc3BQAqfnhJyz8lfR6580SF/FXVu83Nz1xrrnFqqXL6Qxl47DNSm4RFflvN5sABDD8peouqLLKQXVdGbnqf+qIpOxON4ZyYdJEJ6sy4zS2c5eRPTT4Jyp46qDE5/ptAWqJOQ9e6yE82FXBbZCk1/tXVoshVoopE3CB0zmraI3nbqCJ/gW3ZMgtbC5nh/QHlOoOZBxQCRgAAAABJRU5ErkJggg=="
                         alt="Symfony"/>
                </div>

                <div class="login-status">
                    {% if user is defined and user == true %}
                        Hello, <b>{{ user.firstname }} {{ user.lastname }}</b> <br>
                        <a href="{{ url('logout') }}"><b>Logout</b></a>
                    {% else %}
                        You are not loggen in.<br>
                        <a href="{{ url('account') }}"><b>Login</b></a>
                    {% endif %}
                </div>

                <div class="sf-reset">
                    <img src="{{ asset('bundles/framework/images/paintbrush2.png') }}"/>

                    <div class="block">

                        <h1 class="title">YourAccount</h1>

                        <p>You can draw here ...</p>

                        <script>
                            window.onload = init;
                            {% if image.content is defined %}
                                loadImage('{{ image.content }}');
                            {% endif %}
                        </script>
                        <frame scrolling="yes">
                            <canvas id="canvas" width="800" height="400"></canvas>
                        </frame>

                        <div id="layer_list_div" class ="sf-reset block2">
                            <ul id ="layer_list">

                            </ul> 
                        </div>

                        <br /><br>
                        <div id="layers" class="sf-reset block2">

                            <button style="width:180px;" onclick="javascript:addLayer(prompt('Please enter layer name'))">New layer</button></td></tr>
                            <br>
                            <tr><td><button style="width:180px;" onclick="javascript:clearArea();
                                    return false;">Clear Area</button><br>

                                    <!--<button onclick="javascript:load();
                                        return false;">Load</button>-->
                                    <button style="width:180px;" onclick="javascript:saveImage('{{ path('account_image_save') }}');
                                            return false;">Save</button><br>


                                    <table>
                                        <tr>    
                                            <td>Line width:</td> 
                                            <td><select id="selWidth" style="width:75px;">
                                                    <option value="1">1</option>
                                                    <option value="3">3</option>
                                                    <option value="5">5</option>
                                                    <option value="7">7</option>
                                                    <option value="9" selected="selected">9</option>
                                                    <option value="11">11</option>
                                                </select></td>
                                        </tr>
                                        <tr>  
                                            <td>Color:</td> 
                                            <td><select id="selColor" style="width:75px;">
                                                    <option value="black">black</option>
                                                    <option value="blue" selected="selected">blue</option>
                                                    <option value="red">red</option>
                                                    <option value="green">green</option>
                                                    <option value="yellow">yellow</option>
                                                    <option value="gray">gray</option>
                                                </select>
                                            </td>
                                        </tr>  
                                        <tr>  
                                            <td>Shape:</td> 
                                            <td><select id="selMode" style="width:75px;">
                                                    <option value="Line">Line</option>
                                                    <option value="Ellipse" selected="selected">Ellipse</option>
                                                    <option value="Pencil">Pencil</option>
                                                    <option value="Move">Modify</option> 
                                                    <option value="MoveLayer">Move Layer</option>                                                     
                                                    <option value="Rotate">Rotate</option>                                                      
                                                </select>
                                            </td></tr>  

                                        <tr>
                                            <td><select id="selExt" style="width:75px;">
                                                    <option value="bmp">BMP</option>
                                                    <option value="jpeg">JPG</option>
                                                    <option value="png" selected="selected">PNG</option>
                                                </select>
                                            </td>
                                            <td><a href="#" class="button" id="btn-download" download="name"><b>Download</b></a></td>
                                        </tr>
                                        <tr>
                                            <td>
                                                <form action="">
                                                    <input id="public" type="checkbox" name="public" value="public">Public<br>
                                                </form>
                                            </td>
                                        </tr>
                                    </table>
                                    <script>
                                        var button = document.getElementById('btn-download');
                                        button.addEventListener('click', function (e) {

                                            var ext = $("#selExt").val();
                                            $("#btn-download").attr({
                                                "download": "name" + "." + ext
                                            });
                                            var dataURL = canvas.toDataURL('image/' + ext);
                                            button.href = dataURL;
                                        });
                                    </script>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
